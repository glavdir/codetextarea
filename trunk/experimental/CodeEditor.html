<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>Code editor</title>
    <style type="text/css">
    	@import url("style/codeEditor.css");
    	@import url("../dojox/resources/CodeTextArea.css");
		/*@import url("../dijit/themes/not/not.css");*/
		@import url("../dijit/themes/tundra/tundra.css");
    </style>
	<script type="text/javascript" src="../dojo/dojo.js"
		djConfig="isDebug: false, debugAtAllCosts: false, parseOnLoad:true"></script>
	<script type="text/javascript">
	    dojo.require("dojox.widget.CodeTextArea");
		dojo.require("dojo.parser");	// scan page for widgets and instantiate them

	    function writePosition(position){
	    	dojo.byId("coords").firstChild.innerHTML = position.x+":"+position.y;
	    }
    	dojo.subscribe("cta::CaretMove", writePosition);

	    dojo.addOnLoad(start);
	    function start(){
	    	dojo.connect(dojo.byId("viewInner"), "onclick", go);
	    	dojo.connect(dojo.byId("viewSelection"), "onclick", showSelection);
	    	dojo.connect(dojo.byId("cloneDocument"), "onclick", cloneDocument);
	    	dojo.connect(dojo.byId("viewInnerText"), "onclick", viewInnerText);
			
	    }
	    function go(){
	    	dojo.byId("debugArea").value = dijit.byId("cta").domNode.innerHTML;
	    }
		function viewInnerText(){
			var content = dijit.byId("cta").getContent();
			dojo.byId("debugArea").value = content;
		}
	    function showSelection(){
	    	window.alert(dijit._editor.selection.getSelectedText());
	    }
	    function cloneDocument(){
	    	var _clone = dijit.byId("cta").domNode.cloneNode(true);
	    	dojo.byId("debugArea").value = _clone.innerHTML;
	    }
	</script>	
  </head>
  
  <body class="tundra">
<div id="cta" dojoType="dojox.widget.CodeTextArea" plugins="BlinkingCaret GoToLineDialog Bookmarks ColorizeBrackets" colorsUrl="javascript_dojo_color.json" autocompleteUrl="javascript_dojo_ac.json" height="500" width="1000"></div>
<div id="footer"><div id="coords"><div>1:1</div></div></div>

<input type="button" name="viewInner" value="view innerHTML" id="viewInner"/> 
<input type="button" name="viewInnerText" value="view inner text" id="viewInnerText"/> 
<input type="button" name="viewSelection" value="view Selection" id="viewSelection"/> 
<input type="button" name="cloneDocument" value="cloneDocument" id="cloneDocument"/> 

<textarea id="debugArea" style="width:500px;height:500px"></textarea>
</body>
</html>
